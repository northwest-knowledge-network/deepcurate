<!doctype html>

<script src="https://unpkg.com/@popperjs/core@2"></script>
<script type="text/javascript" src="static/js/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.1/js/bootstrap.bundle.min.js" ></script>
<script type="text/javascript" src="static/js/jkpopimage.js"></script>

<!-- <script type="text/javascript" src="static/js/bootstrap.min.js"></script> -->


<script type="text/javascript">

// JK Pop up image viewer script- By JavaScriptKit.com
// Visit JavaScript Kit (http://javascriptkit.com)
// for free JavaScript tutorials and scripts
// This notice must stay intact for use

var popbackground="black" //specify backcolor or background image for pop window
var windowtitle="Pest Preview Window"  //pop window title

function detectexist(obj){
	return (typeof obj !="undefined")
}

function jkpopimage(imgpath, popwidth, popheight, textdescription){

	function getpos(){
		leftpos=(detectexist(window.screenLeft))? screenLeft+document.body.clientWidth/2-popwidth/2 : detectexist(window.screenX)? screenX+innerWidth/2-popwidth/2 : 0
		toppos=(detectexist(window.screenTop))? screenTop+document.body.clientHeight/2-popheight/2 : detectexist(window.screenY)? screenY+innerHeight/2-popheight/2 : 0

		if (window.opera){
			leftpos-=screenLeft
			toppos-=screenTop
		}
	}


	getpos()
	var winattributes='width='+popwidth+',height='+popheight+',resizable=yes,left='+leftpos+',top='+toppos
	var bodyattribute=(popbackground.indexOf(".")!=-1)? 'background="'+popbackground+'"' : 'bgcolor="'+popbackground+'"'

	if (typeof jkpopwin=="undefined" || jkpopwin.closed)
		jkpopwin=window.open("","",winattributes)
	else{
		getpos() //uncomment these 2 lines if you wish subsequent popups to be centered too
		jkpopwin.moveTo(leftpos, toppos)
		//jkpopwin.resizeTo(popwidth, popheight+30)
	}

	jkpopwin.document.open()
	//jkpopwin.document.write('<html><title>'+windowtitle+'</title><body '+bodyattribute+'><img src="'+imgpath+'" style="margin-bottom: 0.5em;color:white;"><br />'+textdescription+'</body></html>')
	jkpopwin.document.write('<html><title>'+windowtitle+'</title><body '+bodyattribute+'><table><tr><td><img src="'+imgpath+'" style="margin-bottom: 0.5em;color:white;"></td><td>'+textdescription+'</td></tr></table></body></html>')
	jkpopwin.document.close()
	jkpopwin.focus()

	// SHENEMAN
	// load the image, determine width and height and re-size popup accordingly
	const img = new Image();
	img.onload = function() { 
		jkpopwin.resizeTo(this.width+256, this.height+50)
	}
	img.src = imgpath;

}

</script>


<title>{% block title %}{% endblock %} - Photos</title>

{% include "header.html" %}

{{ pagination.info }}

<table class="table table-striped">
   <thead class="thead-dark">
      <tr>
         <th scope="col">ID</th>
	 <th scope="col"><center>Image</center></th>
	 <th scope="col">Crop</th>
	 <th scope="col">Crop Other</th>
	 <th scope="col">Contributor</th>
	 <th scope="col">Lat</th>
	 <th scope="col">Lng</th>
	 <th scope="col">Timestamp</th>
	 <th scope="col">Width</th>
	 <th scope="col">Height</th>
	 <th scope="col">Camera</th>
	 <th scope="col">Lens</th>
	 <th scope="col">Class 1</th>
	 <th scope="col">Class 2</th>
	 <th scope="col">Class 3</th>
	 <th scope="col">Class 4</th>
      </tr>
   </thead>

<tbody>
{% for item in data %}
<TR>
   <TD class="classification"> 


<div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Dropdown button
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item" href="#">Action</a>
    <a class="dropdown-item" href="#">Another action</a>
    <a class="dropdown-item" href="#">Something else here</a>
  </div>
</div>




   </TD>

   <TD class="id">{{item[0]}}</TD>
   <TD align=center class="thumbnail"><a href="#" onClick="jkpopimage('/static/images/previews/{{item[1]}}', 1400, 1400, '<p style=\'color:white;\'>Photo ID: <b>{{item[0]}}</b><br>crop: <b>{{item[2]}}</b><br>crop other: <b>{{item[3]}}</b><br>contributor: <b>{{item[4]}}</b><br>coordinates: <b>({{item[5]}}, {{item[6]}})</b><br>camera: <b>{{item[9]}}</b><br>lens: <b>{{item[10]}}</b><br>timestamp: <b>{{item[15]}}</b></p>'); return false"> <img src="/static/images/thumbnails/{{item[1]}}"></TD> 
   <TD class="crop">{{item[2]}}</TD>
   <TD class="crop_other">{{item[3]}}</TD>
   <TD class="name">{{item[4]}}</TD>
   <TD class="lat">{{item[5]}}</TD>
   <TD class="lon">{{item[6]}}</TD>
   <TD class="timestamp">{{item[15]}}</TD>
   <TD class="width">{{item[7]}}</TD>
   <TD class="height">{{item[8]}}</TD>
   <TD class="camera">{{item[9]}}</TD>
   <TD class="lens">{{item[10]}}</TD>
	
</TR>
{% endfor %}
</tbody>
</table>


{{pagination.info}}
{{pagination.links}}
